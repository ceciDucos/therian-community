import{a as A}from"./chunk-HWHG6NHR.js";import{a as R}from"./chunk-GS3VH2CW.js";import"./chunk-A7VTSCNG.js";import{a as B}from"./chunk-UOP3CD4R.js";import{c as p,d as F,e as N,g as I,h as T,i as L,m as q,o as z}from"./chunk-ZFKS3NJ4.js";import{b as O,c as S,e as k}from"./chunk-6I7YCHVY.js";import{C as u,Ea as m,F as _,Fa as x,Ga as h,K as f,Qa as a,Ra as o,S as t,W as b,ab as P,ba as v,ca as C,ha as c,ia as r,ib as y,ja as n,jb as E,ka as d,qa as w,sa as M}from"./chunk-RTC3656N.js";function D(i,e){if(i&1&&(r(0,"div",11),_(),r(1,"svg",19),d(2,"circle",20)(3,"line",21)(4,"line",22),n(),m(5),n()),i&2){let l=M();t(5),h(" ",l.errorMessage()," ")}}function G(i,e){if(i&1&&(r(0,"div",12),_(),r(1,"svg",19),d(2,"path",23)(3,"polyline",24),n(),m(4),n()),i&2){let l=M();t(4),h(" ",l.successMessage()," ")}}function j(i,e){i&1&&(r(0,"span",14),_(),r(1,"svg",25),d(2,"circle",26)(3,"path",27),n(),m(4),a(5,"translate"),n()),i&2&&(t(4),h(" ",o(5,1,"auth.creatingAccount")," "))}function U(i,e){i&1&&(r(0,"span"),m(1),a(2,"translate"),n()),i&2&&(t(),x(o(2,1,"auth.createAccount")))}var V=class i{fb=u(q);authService=u(R);router=u(y);translate=u(O);registerForm=this.fb.nonNullable.group({username:["",[p.required,p.minLength(3),p.pattern(/^[a-zA-Z0-9_]+$/)]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]});isLoading=f(!1);errorMessage=f("");successMessage=f("");getUsernameError(){let e=this.registerForm.controls.username;return e.touched&&e.hasError("required")?this.translate.instant("auth.usernameRequired"):e.touched&&e.hasError("minlength")?this.translate.instant("auth.usernameMin"):e.touched&&e.hasError("pattern")?this.translate.instant("auth.usernamePattern"):""}getEmailError(){let e=this.registerForm.controls.email;return e.touched&&e.hasError("required")?this.translate.instant("auth.emailRequired"):e.touched&&e.hasError("email")?this.translate.instant("auth.emailInvalid"):""}getPasswordError(){let e=this.registerForm.controls.password;return e.touched&&e.hasError("required")?this.translate.instant("auth.passwordRequired"):e.touched&&e.hasError("minlength")?this.translate.instant("auth.passwordMin"):""}usernameError(){return this.getUsernameError()}emailError(){return this.getEmailError()}passwordError(){return this.getPasswordError()}async onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let{email:e,password:l,username:s}=this.registerForm.getRawValue();try{let{error:g}=await this.authService.signUp(e,l,{username:s});if(g)throw g;this.successMessage.set(this.translate.instant("auth.accountCreated")),setTimeout(()=>this.router.navigate(["/login"]),2e3)}catch(g){this.errorMessage.set(g.message||this.translate.instant("auth.registerError"))}finally{this.isLoading.set(!1)}}static \u0275fac=function(l){return new(l||i)};static \u0275cmp=b({type:i,selectors:[["app-register"]],decls:35,vars:39,consts:[[1,"register"],[1,"register__container"],[1,"register__card"],[1,"register__content"],[1,"register__header"],[1,"register__title"],[1,"register__form",3,"ngSubmit","formGroup"],[1,"register__fields"],["formControlName","username",3,"label","placeholder","error","hint"],["formControlName","email","type","email",3,"label","placeholder","error"],["formControlName","password","type","password",3,"label","placeholder","error"],[1,"register__error"],[1,"register__success"],["type","submit","description","Register","variant","primary","size","lg",1,"w-full","text-lg","h-12",3,"disabled","fullWidth"],[1,"register__loading"],[1,"register__divider"],[1,"register__divider-line"],[1,"register__signin"],["routerLink","/login"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(l,s){l&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h1",5),m(7),a(8,"translate"),n()()(),r(9,"form",6),w("ngSubmit",function(){return s.onSubmit()}),r(10,"div",7),d(11,"app-input",8),a(12,"translate"),a(13,"translate"),a(14,"translate"),d(15,"app-input",9),a(16,"translate"),a(17,"translate"),d(18,"app-input",10),a(19,"translate"),a(20,"translate"),n(),v(21,D,6,1,"div",11),v(22,G,5,1,"div",12),r(23,"app-button",13),v(24,j,6,3,"span",14)(25,U,3,3,"span"),n()(),r(26,"div",15)(27,"div",16),d(28,"span"),n()(),r(29,"p",17),m(30),a(31,"translate"),r(32,"a",18),m(33),a(34,"translate"),n()()()()()()),l&2&&(t(7),x(o(8,19,"auth.joinPack")),t(2),c("formGroup",s.registerForm),t(2),c("label",o(12,21,"auth.username"))("placeholder",o(13,23,"auth.usernamePlaceholder"))("error",s.usernameError())("hint",o(14,25,"auth.usernameHint")),t(4),c("label",o(16,27,"auth.email"))("placeholder",o(17,29,"auth.emailPlaceholder"))("error",s.emailError()),t(3),c("label",o(19,31,"auth.password"))("placeholder",o(20,33,"auth.passwordPlaceholder"))("error",s.passwordError()),t(3),C(s.errorMessage()?21:-1),t(),C(s.successMessage()?22:-1),t(),c("disabled",s.registerForm.invalid||s.isLoading())("fullWidth",!0),t(),C(s.isLoading()?24:25),t(6),h(" ",o(31,35,"auth.hasAccount")," "),t(3),x(o(34,37,"auth.signIn")))},dependencies:[P,z,I,F,N,L,T,E,B,A,k,S],styles:[".register[_ngcontent-%COMP%]{display:flex;min-height:90vh;align-items:center;justify-content:center;padding:5rem 1rem}@media(min-width:768px){.register[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}}@media(min-width:1024px){.register[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}}.register__container[_ngcontent-%COMP%]{width:100%;max-width:28rem}@media(min-width:1024px){.register__container[_ngcontent-%COMP%]{max-width:30rem}}.register__card[_ngcontent-%COMP%]{background-color:hsl(var(--card));border:1px solid rgba(0,0,0,.05);border-radius:1rem;box-shadow:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;overflow:hidden}[data-theme=dark][_ngcontent-%COMP%]   .register__card[_ngcontent-%COMP%]{border-color:#ffffff1a}.register__content[_ngcontent-%COMP%]{padding:2rem;display:flex;flex-direction:column;gap:1.5rem}@media(min-width:1024px){.register__content[_ngcontent-%COMP%]{padding:3rem 2.5rem}}.register__header[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:.75rem;margin-bottom:2rem}.register__title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;letter-spacing:-.025em;color:hsl(var(--foreground));margin:0}.register__subtitle[_ngcontent-%COMP%]{font-size:1rem;color:hsl(var(--muted-foreground));margin:0}.register__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.register__fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.register__error[_ngcontent-%COMP%]{padding:1rem;font-size:.875rem;color:#ef4444;background-color:#ef44441a;border-radius:.375rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:.75rem}[data-theme=dark][_ngcontent-%COMP%]   .register__error[_ngcontent-%COMP%]{color:#fca5a5;background-color:#7f1d1d33;border-color:#ef444433}.register__success[_ngcontent-%COMP%]{padding:1rem;font-size:.875rem;color:#10b981;background-color:#10b9811a;border-radius:.375rem;border:1px solid rgba(16,185,129,.2);display:flex;align-items:center;gap:.75rem}[data-theme=dark][_ngcontent-%COMP%]   .register__success[_ngcontent-%COMP%]{color:#6ee7b7;background-color:#064e3b66;border-color:#10b98133}.register__signin[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;font-size:.875rem;color:hsl(var(--muted-foreground))}.register__signin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:600;color:hsl(var(--primary));transition:all .2s;cursor:pointer;text-decoration:none}.register__signin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;filter:brightness(1.1)}.register__loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.register__loading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;height:1.25rem;width:1.25rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{V as RegisterComponent};
