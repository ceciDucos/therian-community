import{a as R}from"./chunk-HWHG6NHR.js";import{a as L}from"./chunk-GS3VH2CW.js";import"./chunk-A7VTSCNG.js";import{a as k}from"./chunk-UOP3CD4R.js";import{c as p,d as B,e as F,g as N,h as I,i as T,m as q,o as D}from"./chunk-ZFKS3NJ4.js";import{b as O,c as E,e as S}from"./chunk-6I7YCHVY.js";import{C as g,Ea as s,F as f,Fa as u,Ga as _,K as h,Qa as r,Ra as o,S as n,W as v,ab as w,ba as x,ca as C,ha as m,ia as i,ib as P,ja as l,jb as y,ka as c,qa as M,sa as b}from"./chunk-RTC3656N.js";function z(d,e){if(d&1&&(i(0,"div",12),f(),i(1,"svg",16),c(2,"circle",17)(3,"line",18)(4,"line",19),l(),s(5),l()),d&2){let a=b();n(5),_(" ",a.errorMessage()," ")}}var j=class d{fb=g(q);authService=g(L);router=g(P);translate=g(O);loginForm=this.fb.nonNullable.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]});isLoading=h(!1);errorMessage=h("");getEmailError(){let e=this.loginForm.controls.email;return e.touched&&e.hasError("required")?this.translate.instant("auth.emailRequired"):e.touched&&e.hasError("email")?this.translate.instant("auth.emailInvalid"):""}getPasswordError(){let e=this.loginForm.controls.password;return e.touched&&e.hasError("required")?this.translate.instant("auth.passwordRequired"):e.touched&&e.hasError("minlength")?this.translate.instant("auth.passwordMin"):""}emailError(){return this.getEmailError()}passwordError(){return this.getPasswordError()}async onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading.set(!0),this.errorMessage.set("");let{email:e,password:a}=this.loginForm.getRawValue();try{let{error:t}=await this.authService.signIn(e,a);if(t)throw t;this.router.navigate(["/"])}catch(t){this.errorMessage.set(t.message||this.translate.instant("auth.loginError"))}finally{this.isLoading.set(!1)}}static \u0275fac=function(a){return new(a||d)};static \u0275cmp=v({type:d,selectors:[["app-login"]],decls:31,vars:32,consts:[[1,"login"],[1,"login__container"],[1,"login__card"],[1,"login__content"],[1,"login__right"],[1,"login__header"],[1,"login__title"],[1,"login__subtitle"],[1,"login__form",3,"ngSubmit","formGroup"],[1,"login__fields"],["formControlName","email","type","email",3,"label","placeholder","error"],["formControlName","password","type","password",3,"label","placeholder","error"],[1,"login__error"],["type","submit","variant","primary","size","lg",1,"w-full",3,"loading"],[1,"login__footer"],["routerLink","/register"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),s(7),r(8,"translate"),l(),i(9,"p",7),s(10),r(11,"translate"),l()(),i(12,"form",8),M("ngSubmit",function(){return t.onSubmit()}),i(13,"div",9),c(14,"app-input",10),r(15,"translate"),r(16,"translate"),c(17,"app-input",11),r(18,"translate"),r(19,"translate"),l(),x(20,z,6,1,"div",12),i(21,"app-button",13),s(22),r(23,"translate"),l()(),i(24,"div",14)(25,"p"),s(26),r(27,"translate"),i(28,"a",15),s(29),r(30,"translate"),l()()()()()()()()),a&2&&(n(7),u(o(8,14,"auth.loginTitle")),n(3),u(o(11,16,"auth.loginSubtitle")),n(2),m("formGroup",t.loginForm),n(2),m("label",o(15,18,"auth.email"))("placeholder",o(16,20,"auth.emailPlaceholder"))("error",t.emailError()),n(3),m("label",o(18,22,"auth.password"))("placeholder",o(19,24,"auth.passwordPlaceholder"))("error",t.passwordError()),n(3),C(t.errorMessage()?20:-1),n(),m("loading",t.isLoading()),n(),_(" ",o(23,26,t.isLoading()?"auth.loggingIn":"auth.loginBtn")," "),n(4),_(" ",o(27,28,"auth.noAccount")," "),n(3),u(o(30,30,"auth.registerLink")))},dependencies:[w,D,N,B,F,T,I,y,R,k,S,E],styles:[".login[_ngcontent-%COMP%]{display:flex;min-height:90vh;align-items:center;justify-content:center;padding:5rem 1rem}@media(min-width:768px){.login[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}}@media(min-width:1024px){.login[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}}.login__container[_ngcontent-%COMP%]{width:100%;max-width:28rem}@media(min-width:1024px){.login__container[_ngcontent-%COMP%]{max-width:30rem}}.login__card[_ngcontent-%COMP%]{background-color:hsl(var(--card));border:1px solid rgba(0,0,0,.05);border-radius:1rem;box-shadow:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;overflow:hidden}[data-theme=dark][_ngcontent-%COMP%]   .login__card[_ngcontent-%COMP%]{border-color:#ffffff1a}.login__accent-bar[_ngcontent-%COMP%]{height:6px;background:linear-gradient(to right,hsl(var(--primary)/.8),hsl(var(--primary)))}.login__content[_ngcontent-%COMP%]{padding:2rem;display:flex;flex-direction:column;gap:1.5rem}@media(min-width:1024px){.login__content[_ngcontent-%COMP%]{padding:3rem 2.5rem}}.login__right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.login__header[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:.75rem;margin-bottom:2rem}.login__title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;letter-spacing:-.025em;color:hsl(var(--foreground));margin:0}.login__subtitle[_ngcontent-%COMP%]{font-size:1rem;color:hsl(var(--muted-foreground));margin:0}.login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.login__fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.55rem}.login__action-btn[_ngcontent-%COMP%]{margin-top:1rem}.login__error[_ngcontent-%COMP%]{padding:1rem;font-size:.875rem;color:#ef4444;background-color:#ef44441a;border-radius:.375rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:.75rem}[data-theme=dark][_ngcontent-%COMP%]   .login__error[_ngcontent-%COMP%]{color:#fca5a5;background-color:#7f1d1d33;border-color:#ef444433}.login__footer[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;font-size:.875rem;color:hsl(var(--muted-foreground))}.login__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:600;color:hsl(var(--primary));transition:all .2s;cursor:pointer;text-decoration:none}.login__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;filter:brightness(1.1)}.login__loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.login__loading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;height:1.25rem;width:1.25rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{j as LoginComponent};
