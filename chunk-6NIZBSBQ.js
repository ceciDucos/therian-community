import{a as V}from"./chunk-DOQO6X7R.js";import{a as R}from"./chunk-E7564OWQ.js";import"./chunk-A7VTSCNG.js";import{c as z,e as H}from"./chunk-AMCF2LO2.js";import{C as v,Ca as r,Da as m,Ea as _,F as B,Fa as E,K as h,Na as L,Oa as d,Pa as c,Qa as A,R as y,S as l,W as D,Wa as j,Xa as F,Ya as N,Za as O,ba as s,ca as f,db as U,ea as M,fa as P,ga as S,gb as $,ha as b,ia as a,ja as o,ka as C,sa as x}from"./chunk-NQGW4V7S.js";var q=(t,n,e)=>({"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300":t,"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300":n,"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400":e}),J=(t,n)=>n.url;function K(t,n){t&1&&(a(0,"div",1),C(1,"div",4),a(2,"p",5),r(3),d(4,"translate"),o()()),t&2&&(l(3),m(c(4,1,"publicProfile.loading")))}function Q(t,n){t&1&&(a(0,"div",2)(1,"p",6),r(2,"\u{1F43E}"),o(),a(3,"h2",7),r(4),d(5,"translate"),o(),a(6,"p",8),r(7),d(8,"translate"),o(),a(9,"a",9),r(10),d(11,"translate"),o()()),t&2&&(l(4),m(c(5,3,"publicProfile.notFound")),l(3),m(c(8,5,"publicProfile.notFoundDesc")),l(3),m(c(11,7,"publicProfile.backHome")))}function W(t,n){if(t&1&&C(0,"img",13),t&2){let e,i=x(2);b("src",(e=i.profile())==null?null:e.avatar_url,y)}}function X(t,n){if(t&1&&(a(0,"span"),r(1),d(2,"uppercase"),o()),t&2){let e,i=x(2);l(),m(c(2,1,((e=i.profile())==null||e.username==null?null:e.username.charAt(0))||"?"))}}function Y(t,n){if(t&1&&(a(0,"p",15),r(1),o()),t&2){let e,i=x(2);l(),_(" ",(e=i.profile())==null?null:e.pronouns," ")}}function Z(t,n){if(t&1&&(a(0,"div",21)(1,"span",22),r(2),d(3,"translate"),d(4,"translate"),o()()),t&2){let e,i,u=x(3);l(),b("ngClass",L(6,q,((e=u.profile())==null?null:e.exploration_status)==="defined",((e=u.profile())==null?null:e.exploration_status)==="exploring",((e=u.profile())==null?null:e.exploration_status)==="prefer_not_say")),l(),_(" ",((i=u.profile())==null?null:i.exploration_status)==="defined"?c(3,2,"publicProfile.definedLabel"):((i=u.profile())==null?null:i.exploration_status)==="exploring"?c(4,4,"publicProfile.exploringLabel"):"\u2014"," ")}}function ee(t,n){if(t&1&&(a(0,"div",16)(1,"h3",19)(2,"span"),r(3,"\u{1F43E}"),o(),r(4),d(5,"translate"),o(),a(6,"p",20),r(7),o(),s(8,Z,5,10,"div",21),o()),t&2){let e,i,u=x(2);l(4),_(" ",c(5,3,"publicProfile.theriotype")," "),l(3),m((e=u.profile())==null?null:e.theriotype),l(),f((i=u.profile())!=null&&i.exploration_status?8:-1)}}function te(t,n){if(t&1&&(a(0,"div",16)(1,"h3",23),r(2),d(3,"translate"),o(),a(4,"p",24),r(5),o()()),t&2){let e,i=x(2);l(2),m(c(3,2,"publicProfile.bioLabel")),l(3),m((e=i.profile())==null?null:e.bio)}}function ie(t,n){if(t&1&&(a(0,"span",26),r(1),o()),t&2){let e=n.$implicit;l(),_(" ",e," ")}}function ne(t,n){if(t&1&&(a(0,"div",17)(1,"h3",23),r(2),d(3,"translate"),o(),a(4,"div",25),P(5,ie,2,1,"span",26,M),o()()),t&2){let e,i=x(2);l(2),m(c(3,1,"publicProfile.interestsLabel")),l(3),S((e=i.profile())==null?null:e.interests)}}function le(t,n){if(t&1&&(a(0,"a",28),B(),a(1,"svg",29),C(2,"path",30)(3,"polyline",31)(4,"line",32),o(),r(5),o()),t&2){let e=n.$implicit;b("href",e.url,y),l(5),_(" ",e.label," ")}}function oe(t,n){if(t&1&&(a(0,"div",17)(1,"h3",23),r(2),d(3,"translate"),o(),a(4,"div",27),P(5,le,6,2,"a",28,J),o()()),t&2){let e=x(2);l(2),m(c(3,1,"publicProfile.linksLabel")),l(3),S(e.externalLinksArray())}}function ae(t,n){if(t&1&&(a(0,"div",3)(1,"div",10)(2,"div",11)(3,"div",12),s(4,W,1,1,"img",13)(5,X,3,3,"span"),o(),a(6,"div",14)(7,"h1",7),r(8),o(),a(9,"p",15),r(10),o(),s(11,Y,2,1,"p",15),o()()(),s(12,ee,9,5,"div",16),s(13,te,6,4,"div",16),s(14,ne,7,3,"div",17),s(15,oe,7,3,"div",17),a(16,"div",18),r(17),d(18,"translate"),d(19,"date"),o()()),t&2){let e,i,u,k,w,I,g,T,p=x();l(4),f((e=p.profile())!=null&&e.avatar_url?4:5),l(4),m(((i=p.profile())==null?null:i.display_name)||((i=p.profile())==null?null:i.username)),l(2),E("","@","",(u=p.profile())==null?null:u.username),l(),f(p.shouldShow("pronouns")&&((k=p.profile())!=null&&k.pronouns)?11:-1),l(),f(p.shouldShow("theriotype")&&((w=p.profile())!=null&&w.theriotype)?12:-1),l(),f(p.shouldShow("bio")&&((I=p.profile())!=null&&I.bio)?13:-1),l(),f(p.shouldShow("interests")&&(!((g=p.profile())==null||g.interests==null)&&g.interests.length)?14:-1),l(),f(p.shouldShow("external_links")&&p.hasExternalLinks()?15:-1),l(2),E(" ",c(18,11,"publicProfile.memberSince")," ",A(19,13,(T=p.profile())==null?null:T.created_at,"MMMM yyyy")," ")}}var G=class t{route=v(U);profileService=v(V);authService=v(R);profile=h(null);loading=h(!0);isAuthenticated=this.authService.isAuthenticated;async ngOnInit(){let n=this.route.snapshot.paramMap.get("username");n?await this.loadProfile(n):this.loading.set(!1)}async loadProfile(n){this.loading.set(!0);let{data:e,error:i}=await this.profileService.getProfileByUsername(n);e&&this.profile.set(e),this.loading.set(!1)}shouldShow(n){let e=this.profile()?.privacy_settings;if(!e)return!0;let i=e[n];return!i||i==="public"?!0:i==="members_only"?this.isAuthenticated():!1}hasExternalLinks(){let n=this.profile()?.external_links;return!!n&&Object.keys(n).length>0}externalLinksArray(){let n=this.profile()?.external_links;return n?Object.entries(n).map(([e,i])=>({label:e,url:i})):[]}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-public-profile"]],decls:4,vars:3,consts:[[1,"max-w-2xl","mx-auto","py-8","px-4"],[1,"text-center","py-16"],[1,"text-center","py-16","space-y-4"],[1,"space-y-6"],[1,"inline-block","w-8","h-8","border-4","border-primary/30","border-t-primary","rounded-full","animate-spin"],[1,"text-muted-foreground","mt-4"],[1,"text-5xl"],[1,"text-2xl","font-bold"],[1,"text-muted-foreground"],["routerLink","/",1,"text-primary","hover:underline"],[1,"bg-card","rounded-xl","border","p-6"],[1,"flex","items-center","gap-6"],[1,"w-24","h-24","rounded-full","bg-gradient-to-br","from-primary","to-accent","flex","items-center","justify-center","text-3xl","font-bold","text-white","overflow-hidden","flex-shrink-0"],["alt","Avatar",1,"w-full","h-full","object-cover",3,"src"],[1,"space-y-1"],[1,"text-sm","text-muted-foreground"],[1,"bg-card","rounded-xl","border","p-5","space-y-2"],[1,"bg-card","rounded-xl","border","p-5","space-y-3"],[1,"text-center","text-xs","text-muted-foreground","pt-4"],[1,"text-sm","font-medium","text-muted-foreground","flex","items-center","gap-2"],[1,"font-medium"],[1,"mt-1"],[1,"px-2","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"text-sm","leading-relaxed","whitespace-pre-line"],[1,"flex","flex-wrap","gap-2"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-primary/10","text-primary"],[1,"space-y-2"],["target","_blank","rel","noopener noreferrer",1,"flex","items-center","gap-2","text-sm","text-primary","hover:underline",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"]],template:function(e,i){e&1&&(a(0,"div",0),s(1,K,5,3,"div",1),s(2,Q,12,9,"div",2),s(3,ae,20,16,"div",3),o()),e&2&&(l(),f(i.loading()?1:-1),l(),f(!i.loading()&&!i.profile()?2:-1),l(),f(!i.loading()&&i.profile()?3:-1))},dependencies:[O,j,$,H,F,N,z],encapsulation:2})};export{G as PublicProfileComponent};
