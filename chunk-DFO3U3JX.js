import{a as A}from"./chunk-ASKQMJYF.js";import{b as R}from"./chunk-TMZRTJDE.js";import{a as B}from"./chunk-M6UWFHQV.js";import{c as p,d as F,e as N,g as I,h as T,i as L,m as q,o as z}from"./chunk-L5UFCLKC.js";import{b as O,c as S,e as k}from"./chunk-R2LU7DUE.js";import{C as u,Ca as m,Da as h,Ea as _,F as f,K as v,Oa as a,Pa as o,S as r,W as M,Za as y,ba as x,ca as C,eb as P,fb as E,ha as g,ia as t,ja as i,ka as d,qa as w,sa as b}from"./chunk-DB7Y4EIF.js";function D(n,e){if(n&1&&(t(0,"div",15),f(),t(1,"svg",23),d(2,"circle",24)(3,"line",25)(4,"line",26),i(),m(5),i()),n&2){let l=b();r(5),_(" ",l.errorMessage()," ")}}function G(n,e){if(n&1&&(t(0,"div",16),f(),t(1,"svg",23),d(2,"path",27)(3,"polyline",28),i(),m(4),i()),n&2){let l=b();r(4),_(" ",l.successMessage()," ")}}function j(n,e){n&1&&(t(0,"span",18),f(),t(1,"svg",29),d(2,"circle",30)(3,"path",31),i(),m(4),a(5,"translate"),i()),n&2&&(r(4),_(" ",o(5,1,"auth.creatingAccount")," "))}function U(n,e){n&1&&(t(0,"span"),m(1),a(2,"translate"),i()),n&2&&(r(),h(o(2,1,"auth.createAccount")))}var V=class n{fb=u(q);authService=u(R);router=u(P);translate=u(O);registerForm=this.fb.nonNullable.group({username:["",[p.required,p.minLength(3),p.pattern(/^[a-zA-Z0-9_]+$/)]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]});isLoading=v(!1);errorMessage=v("");successMessage=v("");getUsernameError(){let e=this.registerForm.controls.username;return e.touched&&e.hasError("required")?this.translate.instant("auth.usernameRequired"):e.touched&&e.hasError("minlength")?this.translate.instant("auth.usernameMin"):e.touched&&e.hasError("pattern")?this.translate.instant("auth.usernamePattern"):""}getEmailError(){let e=this.registerForm.controls.email;return e.touched&&e.hasError("required")?this.translate.instant("auth.emailRequired"):e.touched&&e.hasError("email")?this.translate.instant("auth.emailInvalid"):""}getPasswordError(){let e=this.registerForm.controls.password;return e.touched&&e.hasError("required")?this.translate.instant("auth.passwordRequired"):e.touched&&e.hasError("minlength")?this.translate.instant("auth.passwordMin"):""}usernameError(){return this.getUsernameError()}emailError(){return this.getEmailError()}passwordError(){return this.getPasswordError()}async onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let{email:e,password:l,username:s}=this.registerForm.getRawValue();try{let{error:c}=await this.authService.signUp(e,l,{username:s});if(c)throw c;this.successMessage.set(this.translate.instant("auth.accountCreated")),setTimeout(()=>this.router.navigate(["/login"]),2e3)}catch(c){this.errorMessage.set(c.message||this.translate.instant("auth.registerError"))}finally{this.isLoading.set(!1)}}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=M({type:n,selectors:[["app-register"]],decls:41,vars:42,consts:[[1,"register"],[1,"register__container"],[1,"register__card"],[1,"register__accent-bar"],[1,"register__content"],[1,"register__header"],[1,"register__icon"],["src","assets/masks/register-wolf.png","alt","Wolf Mask"],[1,"register__title"],[1,"register__subtitle"],[1,"register__form",3,"ngSubmit","formGroup"],[1,"register__fields"],["formControlName","username",3,"label","placeholder","error","hint"],["formControlName","email","type","email",3,"label","placeholder","error"],["formControlName","password","type","password",3,"label","placeholder","error"],[1,"register__error"],[1,"register__success"],["type","submit","description","Register","variant","primary","size","lg",1,"w-full","text-lg","h-12",3,"disabled","fullWidth"],[1,"register__loading"],[1,"register__divider"],[1,"register__divider-line"],[1,"register__signin"],["routerLink","/login"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(l,s){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),d(3,"div",3),t(4,"div",4)(5,"div",5)(6,"div",6),d(7,"img",7),i(),t(8,"div")(9,"h1",8),m(10),a(11,"translate"),i(),t(12,"p",9),m(13),a(14,"translate"),i()()(),t(15,"form",10),w("ngSubmit",function(){return s.onSubmit()}),t(16,"div",11),d(17,"app-input",12),a(18,"translate"),a(19,"translate"),a(20,"translate"),d(21,"app-input",13),a(22,"translate"),a(23,"translate"),d(24,"app-input",14),a(25,"translate"),a(26,"translate"),i(),x(27,D,6,1,"div",15),x(28,G,5,1,"div",16),t(29,"app-button",17),x(30,j,6,3,"span",18)(31,U,3,3,"span"),i()(),t(32,"div",19)(33,"div",20),d(34,"span"),i()(),t(35,"p",21),m(36),a(37,"translate"),t(38,"a",22),m(39),a(40,"translate"),i()()()()()()),l&2&&(r(10),h(o(11,20,"auth.joinPack")),r(3),h(o(14,22,"auth.registerSubtitle")),r(2),g("formGroup",s.registerForm),r(2),g("label",o(18,24,"auth.username"))("placeholder",o(19,26,"auth.usernamePlaceholder"))("error",s.usernameError())("hint",o(20,28,"auth.usernameHint")),r(4),g("label",o(22,30,"auth.email"))("placeholder",o(23,32,"auth.emailPlaceholder"))("error",s.emailError()),r(3),g("label",o(25,34,"auth.password"))("placeholder",o(26,36,"auth.passwordPlaceholder"))("error",s.passwordError()),r(3),C(s.errorMessage()?27:-1),r(),C(s.successMessage()?28:-1),r(),g("disabled",s.registerForm.invalid||s.isLoading())("fullWidth",!0),r(),C(s.isLoading()?30:31),r(6),_(" ",o(37,38,"auth.hasAccount")," "),r(3),h(o(40,40,"auth.signIn")))},dependencies:[y,z,I,F,N,L,T,E,B,A,k,S],styles:[".register[_ngcontent-%COMP%]{display:flex;min-height:90vh;align-items:center;justify-content:center;padding:5rem 1rem}@media(min-width:768px){.register[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}}@media(min-width:1024px){.register[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}}.register__container[_ngcontent-%COMP%]{width:100%;max-width:32rem}.register__card[_ngcontent-%COMP%]{background-color:hsl(var(--card)/.95);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.1);border-radius:1.5rem;box-shadow:0 25px 50px -12px #00000040;overflow:hidden;box-shadow:0 0 0 1px #ffffff0d,0 25px 50px -12px #00000040}.register__accent-bar[_ngcontent-%COMP%]{height:.5rem;background:linear-gradient(to right,#10b981,#14b8a6,#06b6d4)}.register__content[_ngcontent-%COMP%]{padding:2.5rem;display:flex;flex-direction:column;gap:2rem}.register__header[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:1rem}.register__icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:8rem;height:8rem;display:flex;align-items:center;justify-content:center;margin-bottom:1rem;transition:transform .5s}.register__icon[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.register__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;filter:drop-shadow(0 25px 25px rgba(0,0,0,.15))}.register__title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;letter-spacing:-.025em;color:hsl(var(--foreground));margin:0}.register__subtitle[_ngcontent-%COMP%]{font-size:1rem;color:hsl(var(--muted-foreground));margin-top:.5rem}.register__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.register__fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.register__error[_ngcontent-%COMP%]{padding:1rem;font-size:.875rem;color:#fecaca;background-color:#7f1d1d33;border-radius:.75rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:.75rem}.register__success[_ngcontent-%COMP%]{padding:1rem;font-size:.875rem;color:#bbf7d0;background-color:#14532d33;border-radius:.75rem;border:1px solid rgba(34,197,94,.2);display:flex;align-items:center;gap:.75rem}.register__divider[_ngcontent-%COMP%]{position:relative;padding-top:.5rem;padding-bottom:.5rem}.register__divider-line[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center}.register__divider-line[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;border-top:1px solid rgba(255,255,255,.1)}.register__signin[_ngcontent-%COMP%]{text-align:center;font-size:1rem;color:hsl(var(--muted-foreground))}.register__signin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;color:hsl(var(--primary));transition:all .2s;cursor:pointer;text-decoration-thickness:from-font;text-underline-offset:4px}.register__signin[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:hsl(var(--primary)/.8);text-decoration:underline}.register__loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.register__loading[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;height:1.25rem;width:1.25rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{V as RegisterComponent};
