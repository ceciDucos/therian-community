import{a as u}from"./chunk-3TOK5YK3.js";import{C as c,a as s,b as n,y as l}from"./chunk-DB7Y4EIF.js";var p=class t{supabase=c(u);async getProfile(e){let{data:r,error:a}=await this.supabase.client.from("profiles").select("*").eq("id",e).maybeSingle();return{data:r,error:a}}async getProfileByUsername(e){let{data:r,error:a}=await this.supabase.client.from("profiles").select("*").eq("username",e).maybeSingle();return{data:r,error:a}}async updateProfile(e,r){let{error:a}=await this.supabase.client.from("profiles").upsert(n(s({id:e},r),{updated_at:new Date}));return{error:a}}async uploadAvatar(e,r){let a=r.name.split(".").pop(),o=`${e}/${Math.random()}.${a}`,{error:i}=await this.supabase.client.storage.from("avatars").upload(o,r);if(i)return{url:null,error:i};let{data:f}=this.supabase.client.storage.from("avatars").getPublicUrl(o);return{url:f.publicUrl,error:null}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"})};export{p as a};
